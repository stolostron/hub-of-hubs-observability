kind: ConfigMap
apiVersion: v1
metadata:
  name: acm-leaf-hubs-overview
  namespace: open-cluster-management-observability
  annotations:
    observability.open-cluster-management.io/dashboard-folder: Hob-of-hubs
  labels:
    grafana-custom-dashboard: "true"
data:
  acm-leaf-hubs-overview.json: |
    {"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "editable": true, "gnetId": null, "graphTooltip": 0, "id": 36, "links": [], "panels": [{"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0}, "id": 8, "panels": [], "title": "Cluster Lifecycle", "type": "row"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Value"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 6, "w": 5, "x": 0, "y": 1}, "id": 86, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum(up{namespace=~\"open-cluster-management|open-cluster-management-hub\",pod=~\"cluster-manager-.*|managedcluster-import-controller-.*|\"} == 1) by (cluster) / count(up{namespace=~\"open-cluster-management|open-cluster-management-hub\",pod=~\"cluster-manager-.*|managedcluster-import-controller-.*|\"}) by (cluster)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Up", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Up(Percentage)", "cluster": "Leaf Hub"}}}], "type": "table"}, {"datasource": null, "description": "Shows the status of managed clusters.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Degraded Clusters"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, {"id": "custom.displayMode", "value": "color-background"}]}]}, "gridPos": {"h": 6, "w": 9, "x": 5, "y": 1}, "id": 16, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_ready_clusters_number)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}, {"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_unknown_clusters_number)", "format": "table", "hide": false, "instant": true, "interval": "", "legendFormat": "", "refId": "B"}, {"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_degraded_clusters_number)", "format": "table", "hide": false, "instant": true, "interval": "", "legendFormat": "", "refId": "C"}], "title": "Managed Clusters Status", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value #A": "Ready Clusters", "Value #B": "Unkown Clusters", "Value #C": "Degraded Clusters", "cluster": "Leaf Hub"}}}], "type": "table"}, {"datasource": null, "description": "Shows the status of managed clusters.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Degraded Addons"}, "properties": [{"id": "thresholds", "value": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}, {"id": "custom.displayMode", "value": "color-background"}]}]}, "gridPos": {"h": 6, "w": 9, "x": 14, "y": 1}, "id": 35, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_ready_addons_number)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}, {"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_unknown_addons_number)", "format": "table", "hide": false, "instant": true, "interval": "", "legendFormat": "", "refId": "B"}, {"exemplar": true, "expr": "sum by (cluster) (open_cluster_management_managed_cluster_degraded_addons_number)", "format": "table", "hide": false, "instant": true, "interval": "", "legendFormat": "", "refId": "C"}], "title": "Managed Cluster Addons Status", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value #A": "Ready Addons", "Value #B": "Unkown Addons", "Value #C": "Degraded Addons", "cluster": "Leaf Hub"}}}], "type": "table"}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 7}, "id": 6, "panels": [], "title": "Governance Policy", "type": "row"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Value"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 6, "w": 5, "x": 0, "y": 8}, "id": 88, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum(up{namespace=\"open-cluster-management\",pod=~\"grc-.*|policyreport-.*\"} == 1) by (cluster) / count(up{namespace=\"open-cluster-management\",pod=~\"grc-.*|policyreport-.*\"}) by (cluster)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Up", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Up(Percentage)", "cluster": "Leaf Hub"}}}], "type": "table"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows rate of created polices for the given time.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 5, "y": 8}, "hiddenSeries": false, "id": 18, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(policy_applied_total[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Policy Apply Rate", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:420", "format": "short", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:421", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows ratio of reported policies compared to the the total number of propagated policies.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 11, "y": 8}, "hiddenSeries": false, "id": 20, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(policy_status_report_total[$__rate_interval])) / sum by (cluster) (rate(policy_propagated_total{}[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Policy Report Ratio", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:528", "format": "percentunit", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:529", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows how long has it taken from policy created to status reported.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 7, "x": 17, "y": 8}, "hiddenSeries": false, "id": 22, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "histogram_quantile(0.99, sum by (cluster, le) (policy_status_report_duration_seconds{}))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Policy Status Report Latency 99th Percentile", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:738", "format": "s", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"$$hashKey": "object:739", "format": "short", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 14}, "id": 4, "panels": [], "title": "Application Lifecycle", "type": "row"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Value"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 6, "w": 5, "x": 0, "y": 15}, "id": 90, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum(up{namespace=\"open-cluster-management\",pod=~\"application-.*\"} == 1) by (cluster) / count(up{namespace=\"open-cluster-management\",pod=~\"application-.*\"}) by (cluster)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Up", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Up(Percentage)", "cluster": "Leaf Hub"}}}], "type": "table"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows rate of created applications for the given time.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 5, "y": 15}, "hiddenSeries": false, "id": 24, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(application_applied_total{}[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Application Apply Rate", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1101", "format": "short", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:1102", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows ratio of errors compared to the the total number of applications.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 11, "y": 15}, "hiddenSeries": false, "id": 26, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(application_apply_failure_total[$__rate_interval])) / sum by (cluster) (rate(application_applied_total[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Application Error Ratio", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1158", "format": "percentunit", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:1159", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows how long has it taken to apply the applications to managed clusters.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 7, "x": 17, "y": 15}, "hiddenSeries": false, "id": 28, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "histogram_quantile(0.99, sum by (cluster, le) (applicartion_apply_duration_seconds{}))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Application Apply Latency 99th Percentile", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1317", "format": "ms", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:1318", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"collapsed": false, "datasource": null, "gridPos": {"h": 1, "w": 24, "x": 0, "y": 21}, "id": 2, "panels": [], "title": "Observability", "type": "row"}, {"datasource": null, "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Value"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 6, "w": 5, "x": 0, "y": 22}, "id": 89, "options": {"showHeader": true}, "pluginVersion": "8.1.3", "targets": [{"exemplar": true, "expr": "sum(up{namespace=\"open-cluster-management-observability\"} == 1) by (cluster) / count(up{namespace=\"open-cluster-management-observability\"}) by (cluster)", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Up", "transformations": [{"id": "labelsToFields", "options": {}}, {"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Up(Percentage)", "cluster": "Leaf Hub"}}}], "type": "table"}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows the rate of observability metrics push for the given time.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 5, "y": 22}, "hiddenSeries": false, "id": 30, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(observability_metrics_push_total{}[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Metrics Push Rate", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1374", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}, {"$$hashKey": "object:1375", "format": "short", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows ratio of errored metrics pushes compared to the the total number of metrics pushes.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 6, "x": 11, "y": 22}, "hiddenSeries": false, "id": 32, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "sum by (cluster) (rate(observability_metrics_push_failure_total[$__rate_interval])) / sum by (cluster) (rate(observability_metrics_push_total[$__rate_interval]))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Metrics Push Error Ratio", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1431", "format": "percentunit", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:1432", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}, {"aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "datasource": null, "description": "Shows how long has it taken to push metrics.", "fill": 1, "fillGradient": 0, "gridPos": {"h": 6, "w": 7, "x": 17, "y": 22}, "hiddenSeries": false, "id": 34, "legend": {"avg": false, "current": false, "max": false, "min": false, "show": true, "total": false, "values": false}, "lines": true, "linewidth": 1, "nullPointMode": "null", "options": {"alertThreshold": true}, "percentage": false, "pluginVersion": "8.1.3", "pointradius": 2, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [{"exemplar": true, "expr": "histogram_quantile(0.99, sum by (cluster, le) (observability_metrics_push_duration_seconds{}))", "interval": "", "legendFormat": "", "refId": "A"}], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Metrics Push Latency 99th Percentile", "tooltip": {"shared": true, "sort": 0, "value_type": "individual"}, "type": "graph", "xaxis": {"buckets": null, "mode": "time", "name": null, "show": true, "values": []}, "yaxes": [{"$$hashKey": "object:1488", "format": "ms", "label": null, "logBase": 1, "max": null, "min": "0", "show": true}, {"$$hashKey": "object:1489", "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true}], "yaxis": {"align": false, "alignLevel": null}}], "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": []}, "time": {"from": "now-30m", "to": "now"}, "timepicker": {}, "timezone": "", "title": "ACM Leaf Hubs Overview", "uid": "5b1d81e527cbbbe2fa708c859ac9d7c2", "version": 3}